<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/public/stylesheets/userStyle.css" />
    <link rel="preconnect" href="https://rsms.me/" />
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css" />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.7/css/all.css"
    />
    <title>TIMELESS eCommerce</title>
  </head>
  <body>
    <header>
      <div class="container-fluid header-top">
        <div class="container d-flex header-top-links justify-content-end">
          <a class="px-2 d-none d-lg-block" href="">Contact Us</a>
          <a class="px-2 d-none d-lg-block" href="">About Us</a>
        </div>
      </div>
      <nav
        class="container navbar navbar-expand-lg bg-white py-3 px-2 line-break"
      >
        <div class="container-fluid justify-content-around">
          <a class="navbar-brand d-flex align-items-center" href="/">
            <img
              src="/public/img/timeless-logo.png"
              alt="Logo"
              width="40"
              height="40"
              class="d-inline-block align-text-top"
            />
            <div class="brand-name ms-3">
              <span>TIMELESS</span>
            </div>
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarText"
            aria-controls="navbarText"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav me-auto mb-2 mb-lg-0 align-items-center">
              <li class="nav-item mx-4 ms-lg-5">
                <a class="nav-link" href="/categories/63a051ff7b36d782859a1e3e">Men</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="/categories/63a0523eceb514042442b2f4">Women</a>
              </li>
            </ul>
            <span class="nav-item nav-link text-center mb-2 mb-lg-0 mx-3">
              <a class="nav-link" href="/products">Our Collection</a>
            </span>
            <span class="nav-item nav-link text-center mb-2 mb-lg-0 mx-3">
              <a class="nav-link" href="/users/wishlist">Wishlist</a>
            </span>
            <span class="nav-item nav-link text-center mb-2 mb-lg-0 mx-3">
              <a class="nav-link" href="/users/cart">Cart</a>
            </span>
            <span class="nav-item nav-link text-center mb-2 mb-lg-0 ms-lg-3">
              <a class="nav-link" href="/users/signIn">Sign In</a>
            </span>
          </div>
        </div>
      </nav>
    </header>
    <section class="container mx-auto">
      <div class="pb-2 d-lg-none line-break text-center my-3">
        <span class="shadow-heading" style="font-size: 1.25rem"
          ><%=listingName%></span
        >
      </div>
      <div
        class="line-break text-center py-4 d-flex justify-content-between px-4"
      >
        <div class="dropdown">
          <a
            class="btn btn-light btn-sm dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Filter
          </a>
          <ul class="dropdown-menu">
            <li>
              <span class="dropdown-item" onclick="filter('men')">Men</span>
            </li>
            <li>
              <span class="dropdown-item" onclick="filter('women')">Women</span>
            </li>
            <li>
              <span class="dropdown-item" onclick="removeFilter('none')"
                >NO Filter</span
              >
            </li>
          </ul>
        </div>
        <script>
          function filter(filterBy) {
            $.ajax({
              url: "/products",
              type: "patch",
              data: { filterBy: filterBy },
              success: (res) => {
                $("#productContainer").load(
                  location.href + " #productContainer"
                );
                if (res.success == 0) {
                  $("#searchInput").val("");
                }
              },
            });
          }
          function removeFilter(filterBy) {
            $.ajax({
              url: "/products",
              type: "patch",
              data: { filterBy: filterBy },
              success: (res) => {
                $("#productContainer").load(
                  location.href + " #productContainer"
                );
                $("#searchButton").load(location.href + " #searchButton");
              },
            });
          }
        </script>
        <span
          class="shadow-heading d-none d-lg-block"
          style="font-size: 1.25rem"
          ><%=listingName%></span
        >

        <div class="dropdown">
          <a
            class="btn btn-light btn-sm dropdown-toggle"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            Sort
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Price: Low to High</a></li>
            <li><a class="dropdown-item" href="#">Price: High to low</a></li>
            <!-- <li><a class="dropdown-item" href="#"></a></li> -->
          </ul>
        </div>
      </div>
      <div class="input-group flex-nowrap w-25 my-2 mx-auto">
        <input
          type="text"
          id="searchInput"
          onkeyup="search()"
          class="form-control"
          placeholder="Search"
          aria-label="Search"
          aria-describedby="addon-wrapping"
        />
        <span class="input-group-text" id="searchButton"
          ><img
            src="https://cdn-icons-png.flaticon.com/512/149/149852.png"
            width="15px"
            alt=""
        /></span>
      </div>
<div class="text-center p-o m-0">
  <span style="font-size: 0.5rem;">Search by size .Mix and match search and filter.</span>

</div>
<script>
        function search() {
          var searchInput = $("#searchInput").val();
          if (searchInput) {
            $("#searchButton").html(
              `<button class="btn btn-sm" onclick="filter('none')" >Remove Filter</button>`
            );
          }
          $.ajax({
            url: "/products",
            method: "put",
            data: { searchInput: searchInput },
            success: (res) => {
              $("#productContainer").load(location.href + " #productContainer");
            },
          });
        }
      </script>
      <div
        class="text-center d-flex justify-content-center flex-column my-3"
        id="productContainer"
      >
        <%if(listing!=null){%>
        <div class="row row-cols-1 row-cols-md-4 g-4 justify-content-center">
          <%listing.forEach(product => {%>
          <div class="col-lg-3 m-2">
            <div class="card h-100 border-0">
              <a href="/products/<%=product._id%>"
                ><img
                  src="/public/img/products/<%=product.thumbnail%>"
                  class="card-img-top"
                  alt="..."
                />
                <div class="card-body">
                  <h6 class="card-title text-dark"><%=product.name%></h6>
                  <span
                    style="
                      font-weight: bold;
                      color: #7f7f7f;
                      font-size: 0.75rem;
                    "
                    ><%=product.brand%></span
                  >
                </div></a
              >
            </div>
          </div>
          <%})%>
        </div>
        <%}%>
      </div>
    </section>

    <footer class="bg-theme">
      <div
        class="container links pt-4 pb-2 row mx-auto line-break d-flex justify-content-around"
      >
        <a class="col-lg-2 pb-2 text-center" href="#">Track Shipping</a>
        <a class="col-lg-2 pb-2 text-center" href="#">Contact Us</a>
        <a class="col-lg-2 pb-2 text-center" href="#">Customer Care</a>
        <a class="col-lg-2 pb-2 text-center" href="#">About us</a>
        <span class="col-lg-2 justify-content-center d-flex align-items-center">
          <i class="fab fa-instagram"></i>
          <i class="fab fa-facebook-f"></i>
          <i class="fab fa-twitter"></i>
          <i class="fab fa-whatsapp"></i>
        </span>
      </div>
      <div class="copyright bg-theme py-2 text-center">
        <span>Copyright Â© 2022 | Timeless</span>
      </div>
    </footer>
    <script>
      if (window.history.replaceState) {
        window.history.replaceState(null, null, window.location.href);
      }
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
      crossorigin="anonymous"
    ></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  </body>
</html>
