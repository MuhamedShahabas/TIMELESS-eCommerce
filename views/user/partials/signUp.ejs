<%- include('../layouts/header') %>
<div class="container">
  <div class="line-break text-center py-4">
    <span class="shadow-heading">Welcome to </span
    ><span class="brand-name">TIMELESS</span>
  </div>
  <div class="text-center my-5">
    BUY FROM THE HANDPICKED COLLECTION OF LUXURY WATCH BY <b>TIMELESS</b>
    <p class="text-danger mt-0 pt-4 fw-bold"><%= locals.errorMessage %></p>
  </div>
  <div class="row mb-5">
    <div class="col-lg-5 mx-auto mb-5">
      <form action="/users/signUp" method="post">
        <div class="mb-3">
          <input
            type="text"
            class="form-control"
            id="form-holder"
            name="name"
            placeholder="Name"
            required
          />
        </div>
        <div class="mb-3">
          <input
            class="form-control"
            id="inputNumber"
            onkeyup="numberValidator()"
            name="number"
            placeholder="Contact Number"
            required
            type="number"
          />
          <span
            id="numberInvalid"
            class="text-danger rounded"
            style="font-size: 0.75rem; text-transform: none"
          ></span>
        </div>

        <div class="mb-3">
          <input
            class="form-control"
            id="inputMail"
            name="email"
            placeholder="e-Mail"
            onkeyup="mailValidator()"
            required
            type="email"
          />
          <span
            id="mailInvalid"
            class="text-danger rounded"
            style="font-size: 0.75rem; text-transform: none"
          ></span>
        </div>
        <div class="mb-3">
          <input
            type="password"
            class="form-control"
            id="inputPassword"
            placeholder="Password"
            onkeyup="passwordValidator()"
            name="password"
            required
          />
          <span
            id="passwordInvalid"
            class="text-danger rounded"
            style="font-size: 0.75rem; text-transform: none"
          ></span>
        </div>
        <input
          type="submit"
          id="submitButton"
          class="btn btn-dark w-100"
          value="Send OTP"
        />
      </form>
      <div class="form-footer d-flex justify-content-end">
        <a href="/users/signIn"> Already have an account?</a>
      </div>
    </div>
  </div>
</div>
<script>
  function numberValidator() {
    const inputNumber = $("#inputNumber").val();
    const numberReg = new RegExp("^[0-9]{10}$");
    if (numberReg.test(inputNumber)) {
      $("#submitButton").css("pointer-events", "");
      $("#numberInvalid").empty();
    } else {
      $("#submitButton").css({ "pointer-events": "none" });
      $("#numberInvalid").html(
        '<i class="fa fa-exclamation"></i>Invalid contact Number'
      );
    }
  }
  function mailValidator() {
    const inputMail = $("#inputMail").val();
    if (
      inputMail.match(
        /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
      )
    ) {
      $("#submitButton").css("pointer-events", "");
      $("#mailInvalid").empty();
    } else {
      $("#submitButton").css({ "pointer-events": "none" });
      $("#mailInvalid").html('<i class="fa fa-exclamation"></i>Invalid E-mail');
    }
  }
  function passwordValidator() {
    const inputPassword = $("#inputPassword").val();
    if (inputPassword.length >= 8) {
      if (inputPassword.match(/^(?=.*?[A-Za-z])(?=.*?[0-9]).{8,}$/)) {
        $("#submitButton").css("pointer-events", "");
        $("#passwordInvalid").empty();
      } else {
        $("#submitButton").css({ "pointer-events": "none" });
        $("#passwordInvalid").html(
          '<i class="fa fa-exclamation"></i>Password must contain atleast a number and an alphabet'
        );
      }
    } else {
      $("#submitButton").css({ "pointer-events": "none" });
      $("#passwordInvalid").html(
        '<i class="fa fa-exclamation"></i>Password must be atleast 8 characters'
      );
    }
  }
</script>
<%- include('../layouts/footer') %>
